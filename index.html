<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Live Requests</title>
    <script src="https://code.highcharts.com/highcharts.js"></script>
    <style>
        body {
            background-color: #000;
            color: #ff0000;
            font-family: 'Arial', sans-serif;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            height: 100vh;
            margin: 0;
        }
        #container {
            width: 80%;
            max-width: 800px;
            height: 400px;
            border-radius: 10px;
            padding: 20px;
            background: #1e0000;
            box-shadow: 0px 0px 30px rgba(255, 0, 0, 0.8);
        }
        h1 {
            margin-bottom: 20px;
            text-shadow: 0px 0px 20px rgba(255, 0, 0, 0.8);
        }
    </style>
</head>
<body>
    <h1>Live Request Count</h1>
    <div id="container"></div>
    <script>
        document.addEventListener("DOMContentLoaded", function() {
            Highcharts.chart('container', {
                chart: { 
                    type: 'spline', 
                    backgroundColor: '#1e0000',
                    borderRadius: 10,
                    events: { load: function() {
                        var series = this.series[0];
                        setInterval(async function() {
                            try {
                                const response = await fetch('/hit');
                                const data = await response.json();
                                const x = (new Date()).getTime(), y = data.requests;
                                series.addPoint([x, y], true, series.data.length > 20);
                            } catch (error) { console.error("Error fetching data:", error); }
                        }, 1000);
                    }}
                },
                title: { text: 'Live Request Count', style: { color: '#ff0000', textShadow: '0px 0px 10px rgba(255, 0, 0, 1)' } },
                xAxis: { type: 'datetime', labels: { style: { color: '#ff0000', textShadow: '0px 0px 5px rgba(255, 0, 0, 1)' } } },
                yAxis: { title: { text: 'Requests', style: { color: '#ff0000', textShadow: '0px 0px 5px rgba(255, 0, 0, 1)' } }, labels: { style: { color: '#ff0000', textShadow: '0px 0px 5px rgba(255, 0, 0, 1)' } } },
                series: [{ name: 'Requests', data: [], color: '#ff0000' }],
                legend: { itemStyle: { color: '#ff0000', textShadow: '0px 0px 5px rgba(255, 0, 0, 1)' } }
            });
        });
    </script>
</body>
</html>
